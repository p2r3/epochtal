<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epochtal Live Lobby</title>
    <link rel="icon" href="/icons/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/live/style.css">
    <script src="https://kit.fontawesome.com/fc2642e2d1.js" crossorigin="anonymous"></script>
  </head>
  <body onkeypress="redirectEventToChat(event)">

    <div id="bg-anim-container">
      <div id="bg-anim-bg"></div>
      <canvas id="bg-anim"></canvas>
      <div id="bg-anim-blur"></div>
      <script src="/bg.js"></script>
    </div>

    <div id="page-content">

      <header>
        <div id="header-left">
          <div class="header-block" onclick="window.location.href = '/'">Epochtal</div>
        </div>

        <div id="header-right">
          <div class="header-block" onclick="window.open('https://docs.google.com/document/d/1gcWvwEjzJaKfgOEGpGPFGvtNV_LQCbSC3OE84dARMYE', '_blank')">Help</div>
          <div class="header-block" onclick="copyEventToken()">New Token</div>
          <div class="header-block" onclick="leaveLobby()">Leave Lobby</div>
          <div class="header-block" onclick="window.location.href = '/api/auth/login'" id="login-button">Log in</div>
        </div>
      </header>

      <div class="section">
        <h1 class="margin0" id="lobby-name">Lobby</h1>
        <h3 class="margin0 font-medium font-spaced" id="lobby-mode">...</h3>
      </div>

      <div id="lobby-players-container">
        <h2 class="font-spaced">&nbsp;&nbsp;•&nbsp;•&nbsp;•&nbsp;&nbsp;players&nbsp;<span id="lobby-playercount"></span></h2><br>
        <div id="lobby-players-list"></div>
      </div>

      <div id="lobby-spectator-players-list"></div>

      <div id="lobby-settings-container">

        <h2 class="font-spaced">&nbsp;&nbsp;•&nbsp;•&nbsp;•&nbsp;&nbsp;settings</h2><br>

        <div class="center">

          <button onclick="changeLobbyName()" id="lobby-name-button">Change lobby name</button>
            &nbsp;&nbsp;
          <button onclick="changeLobbyPassword()" id="lobby-password-button">Change lobby password</button>
          <br><br>
          <button onclick="changeLobbyMaxplayers()" id="lobby-maxplayers-button">Change lobby size</button>
            &nbsp;&nbsp;
          <button onclick="changeLobbyMode()" id="lobby-mode-button">Change lobby mode</button>

          <br><br>

          <h3 class="marginb_small">Current map</h3>
          <div id="lobby-settings-map" class="votes-entry" style="text-align: left; margin: 0 15%">

          </div>

          <br><br>

          <h3 class="marginb_small">Are you ready?</h3>
          <button id="lobby-ready-button" onclick="toggleReadyState()">I'm ready!</button><i class="fa-solid fa-repeat" id="lobby-autoready-button" onclick="toggleAutoReady()"></i>
          <br><br>
          <a href="javascript:forceStart()" id="lobby-force-button">Force start</a>

        </div>

      </div>

      <div id="lobby-chat-container">
        <input type="text"
          name="el_lobby_chat_input"
          id="lobby-chat-input"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
          maxlength="200"
          onkeypress="sendChatMessageFromInput(event)"></input>
        <div id="lobby-chat-output">

        </div>
      </div>

      <button id="lobby-spectate-button" onclick="spectate()">Spectate</button>

      <div id="lobby-map-history-container">
        <div id="lobby-map-history-list"></div>
        <i class="fa-solid fa-xmark" id="lobby-map-history-close" onclick="toggleMapHistoryWindow()"></i>
      </div>

      <footer></footer>

      <div id="global-popup">
        <h2 id="global-popup-title">ERR_STYLE</h2>
        <p id="global-popup-text">You should not be seeing this.</p>
        <div style="font-size:0;">
          <button id="global-popup-cancel" onclick="popupOnCancel()">Cancel</button>
          <button id="global-popup-ok" onclick="popupOnOkay()">OK</button>
        </div>
      </div>

      <div id="global-tooltip"></div>

    </div>

    <script src="/tools.js"></script>
    <script src="/live/lobby.js"></script>

  </body>
</html>